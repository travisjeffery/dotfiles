- name: current user
  debug: msg="{{ lookup('env','USER') }}"
- name: home dir 
  debug: msg="{{ ansible_env.HOME }}"
- name: install packages
  become: yes
  yay:
    name:
      - google-chrome
      - zsh
      - redshift
      - docker
      - docker-compose
      - zoom
      - ripgrep
      - rustup
      - cups
      - ttf-roboto-mono
      - ttf-fira-code
      - libnotify
    state: present
- name: install rust
  shell: "{{ item }}"
  with_items:
    - rustup default nightly
    - rustup component add rust-src
- name: make zsh default shell
  shell: chsh -s /bin/zsh tj
  tags: shellchange
  become: true
- name: start docker service
  service:
    name: docker
    state: started
  become: true
- name: use emacs keybinds
  lineinfile:
    dest="{{ item.file }}"
    regexp="{{ item.line }}"
    line="{{ item.line }}"
    state=present
  with_items:
    - { line: 'gtk-key-theme-name="Emacs"', file: "{{ ansible_env.HOME }}/.gtkrc-2.0" }
    - { line: 'gtk-key-theme-name=Emacs', file: "{{ ansible_env.HOME }}/.config/gtk-3.0/settings.ini" }
- name: clone goenv
  become: no
  git:
    repo: https://github.com/syndbg/goenv.git
    version: master
    dest: "{{ ansible_env.HOME }}/.goenv"
    accept_hostkey: yes
